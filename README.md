# 김도영 공식 팬클럽의 최종 프로젝트
### 영화 추천 알고리즘 기반 커뮤니티 서비스

<br/>

# 1. 요구사항
## 개요
  - 영화 데이터 기반 추천 웹 서비스 개발
  - 영화 추천 알고리즘 구현
  - 커뮤니티 서비스 구성
  - 서비스 관리 및 유지보수
    
## 필수 요구사항

1) 영화 데이터
     - 영화 정보 데이터는 최소 50개 이상 존재해야 함
     - fixtures를 사용하여 언제든 load 될 수 있는 초기 데이터가 있어야 함

2) 영화 추천 알고리즘
     - 사용자는 반드시 최소 1개 이상의 영화를 추천받을 수 있어야 함
     - 추천 방식은 자유롭게 구성 가능
     - 어떠한 방식으로 추천 시스템을 구현했는지 기술적으로 설명할 수 있어야 함

3) API
    - API 사용 제한 없음(TMDB, Youtube API 등)

4) 커뮤니티
    - 유저 간 소통할 수 있는 커뮤니티 기능 구현
    - 커뮤니티 기능은 반드시 게시판 형식일 필요는 없으며, 소통이라는 관점 안에서 다양한 방법으로 자유롭게 구현 가능

5) README

   - 팀원 정보 및 업무 분담 내역
    - 목표 서비스 구현 및 실제 구현 정도
    - 데이터 베이스 모델링(ERD)
    - 영화 추천 알고리즘에 대한 기술적 설명
    - 핵심 기능에 대한 설명
    - 기타(느낀점, 후기 등)
    - 배포 서버 URL(배포했을 경우)
    - 이 외의 내용은 자유롭게 작성 가능
    - 몰아서 하지말고 매일매일 업데이트하기
  
6) Project 고도화 
     - AI를 활용하여 서비스 및 데이터 검색/수집 등 로직 구축

7) 기타 
     - 최소한 5개 이상의 URL 및 페이지 구성
     - Django REST framework를 사용하는 경우 사용자 요청에 따라 적절한 HTTP response status code를 응답해야 함
     - .gitignore 파일을 추가하여 불필요한 파일 및 폴더 제출 X
     - 필수 요구사항 외 추가 기능 및 반응형 디자인 등 자유롭게 수행

## 선택 요구사항

- 배포
    - 배포 진행은 공용 문서 참고 (https://abit.ly/pb-document)
        - 서버 (Django) 배포
        - 클라이언트(Vue) 배포

## 제출
  1) 학사 시스템
  2) lab ssafy (이름: 10_pjt)
  3) 유의 사항
   - 팀장이 대표로 두 곳 모두 제출
   - 반드시 각 반 담당 강사님 Maintainer로 설정


<br/>

# 2. 역할 분담

## 주요 역할
- 백: `김하연`
- 프론트: `임예원`
  
## 우리만의 분담법
- 첫 프로젝트이기 때문에 역할을 확실히 나누기는 어려울 것 같음
- 주요 역할 대로 분담은 하지만, 각자 부족한 부분들을 보완해 나가며 진행


<br/>

# 3. 프로젝트 설계/기획

## 1) 왜? : 개요 및 주안점
  - 인간은 '관계'를 중요하시 한다는 점에 착안하여 이를 기반으로 한 영화 추천 서비스 기획
    - 시쳇말로 '덕질'도 '덕친(관심사가 같은 친구)'가 있을 때 재밌다!
    - 취향이 비슷한 사용자들이 있는 영화 모임(Meet-둥지) 추천 애플리케이션 기획

  - 주안점
    1. 영화 취향을 파악할 수 있는 키워드 생성
    2. 취향이 맞는 사람들이 모인 영화 모임 및 영화 추천
    3. 모임 내 활발한 의견(영화 리뷰) 공유 지향


## 2) 무엇을? : 주요 모델 및 기능
  - Keyword: 개인 취향을 파악하기 위한 키워드
    - 영화 장르, 연대, 국가 필드로 이루어진 키워드 모델 생성
    - 이를 기반으로 취향에 맞는 모임, 영화 추천
    - 하나의 필드에서 여러 개의 키워드 선택 가능, 여러 필드 중 하나만 선택 가능

  - Meet(둥지): 영화 취향이 맞는 사람들이 모인 모임
    - 모임 생성시 모임 성격에 맞는 키워드 선택
    - 이를 기반으로 사용자가 원하는 키워드 필터링해 취향에 맞는 모임 찾을 수 있게 함
    - 생성자가 자동으로 해당 모임 관리자로 설정됨. 관리자만 모임 수정, 삭제 가능

  - Review: 영화에 대한 감상
    - rate: 5점 만점에 0.5점 단위 평가 항목
    - content: 영화에 대한 감상 항목

  - Movie
    - 영화 상세 페이지에선 영화 정보 및 리뷰 제공
    - 선택한 키워드 포함한 영화 구성

  - User
    - 개인 별 선호 키워드 설정 가능

## 3) 어떻게? : 기술적 구현
  - 사용할 기술: Django REST Framework + Vue.js

  - 각자 맡을 업무
    - `김하연`'s 업무
      - movie fixturs(keyword, meet, movie, review) 생성, 모델 생성, 그룹 가입, 그룹 탈퇴, 회원 정보, 영화 정보, 영화 리뷰 생성 및 삭제 기능 구현
    - `임예원`'s 업무
      - users fixture 생성, 회원가입, 로그인, 로그아웃 기능 구현, 홈, 회원가입, 로그인, 모임 필터링, 모임 상세, 영화 정보, 영화 그룹 페이지 생성

  - 추천 알고리즘 구현 및 AI를 통한 고도화
    - 추천 알고리즘(ver 1.0)
      1. Meet(둥지)에 들어가면 해당 Meet 키워드 보유한 영화만 필터링 해 50개 슬라이싱 해 제공

    - AI(chat GPT 4.o)를 통한 기능 고도화(ver 2.0)
      User 키워드 이용와 Movie 평점(vote_average field) 이용해 관련도 정렬
      1. Movie의 키워드와 User 선호 키워드 일치 개수에 따라 영화 정렬
      2. 키워드 일치도 같은 영화는 평점 높은 순으로 정렬
      3. 상위 50개 항목 제공
      - 실제 화면 첨부
      <img src="App structures(ERD, component, UI)/AI 고도화/생성형 ai를 통한 추천 시스템 고도화.png">

  - 사용 API
    - TMDB API
      1. MOVIE LISTS -Top Rated
        : 영화 fixtures 생성용
        - 요청 주소 : "https://api.themoviedb.org/3/movie/top_rated"
        - 사용 항목 : overview, poster_path, title, release_date, vote_average, genre_ids
        - 설정:
          - langauage : ko-KR
          - region : KR

      2. MOVIES - Details
        : top rated api에 없는 영화 별 origin country 추가용
        - 요청 주소 : "https://api.themoviedb.org/3/movie/{movie_id}"
        - 사용 항목 : origin_coutry

  - 최종 ERD
      <img src="App structures(ERD, component, UI)/ERD/(최종) DUCK9_ERD(v4).png">

  - 컴포넌트 구조
      <img src="App structures(ERD, component, UI)/Component/DUCK9_components(v3).png">

  - 전체 레이아웃 구성
    1. App.vue (최상위 컴포넌트)
    : App.vue에서는 Router Link로 HomeView, SignUpView, LogInView, MeetJoinView를 연결하였음
    : 화면 상단의 Nav Bar로 링크들을 정렬하였음
    : 화면 하단에 팀명과 로고를 넣었음

    2. HomeView
    : Nav Bar 아래에 홈화면을 두었음
    : 로그인 전/후로 다른 화면을 구성하였음
    : 로그인 전에는 환영 인사와 형성된 모임(MeetGroup.vue)들이 나타남
      <img src="App structures(ERD, component, UI)/UI 실제 구현/홈 화면(비로그인).png">
    : 로그인 후에는 유저 이름과 형성됨 모임(MeetGroup.vue)뿐만 아니라 모임 상세 정보를 볼 수 있는 버튼이 생김
      <img src="App structures(ERD, component, UI)/UI 실제 구현/홈 화면(로그인).png">

    3. SignUpView
    : 회원 가입 페이지에는 아이디, 이메일, 비밀번호, 비밀번호 확인 입력 창을 띄움
      <img src="App structures(ERD, component, UI)/UI 실제 구현/회원가입 페이지.png">

    4. LogInView
    : 로그인 페이지에는 아이디와 비밀번호 입력 창을 띄움
      <img src="App structures(ERD, component, UI)/UI 실제 구현/로그인 페이지.png">


    5. MeetDetailView
    : 모임 이름을 오리를 연상하여 '둥지'라고 부름
    : 둥지들의 상세 정보는 둥지 가입 전/후로 다르게 보이게 구성
    : 둥지 가입 전에는 둥지 들어가기 버튼과 함께, 키워드, 그리고 6개의 추천 영화만 띄움
    : 또한, 둥지 생성자의 경우에는 둥지 생성과 삭제 버튼을 볼 수 있도록 함
      <img src="App structures(ERD, component, UI)/UI 실제 구현/둥지 디테일 페이지(비회원).png">

    : 둥지 가입 후에는 둥지 나가기 버튼과 키워드, 그리고 AI를 통해 고도화한 추천 영화 전부를 한 화면에 6개씩, 여러 화면을 띄움
    - 일반 회원 화면
      <img src="App structures(ERD, component, UI)/UI 실제 구현/둥지 디테일 페이지(일반회원).png">
    - 둥지 관리자 화면(둥지 수정, 삭제 버튼)
      <img src="App structures(ERD, component, UI)/UI 실제 구현/둥지 디테일 페이지(둥지 관리자).png">

    
    6. MovieView
    : 영화 페이지에는 그저, 목록 가기 버튼만 삽입하고 이게 상위 컴포넌트가 되어 아래에 영화 상세 정보, 영화 리뷰 입력, 영화 리뷰 보기 컴포넌트를 삽입
      - MovieDetail.vue
        : 영화 상세 정보를 보여줌
        : 영화 포스터, 개봉일, 평점, 키워드를 데이터 베이스에서 가져와 띄움
        : 영화에 좋아요 기능 추가
        : MovieReviewCreate와 MovieReview 연결
      - MovieReviewCreate.vue
        : 리뷰 작성 폼을 삽입
        : 리뷰 내용, 별점을 입력할 수 있게 구성
        <img src="App structures(ERD, component, UI)/UI 실제 구현/영화 디테일 페이지(리뷰작성).png"  
      - MovieReview.vue
        : 앞서 입력한 영화 리뷰를 띄우는 컴포넌트
        : 리뷰 작성자, 별점, 리뷰를 보여줌
        : 4개째부터는 다음 화면을 띄울 수 있도록 구성
       <img src="App structures(ERD, component, UI)/UI 실제 구현/영화 디테일 페이지(기본).png">

    7. MovieReviewEdit
    : 영화 리뷰 수정 페이지임
    : 리뷰 수정은 별점과 내용으로 구분하여 수정 진행
      <img src="App structures(ERD, component, UI)/UI 실제 구현/리뷰수정 페이지.png">
    8. CreateGroupView
    : 새로운 둥지 생성 페이지임
    : 둥지 이름 입력 칸을 상위에 두고, 그 아래에 장르, 국가, 시대를 복수 선택할 수 있도록 토글을 두었음
    : 복수 선택된 키워드들로 추천 영화가 형성되는 것
      <img src="App structures(ERD, component, UI)/UI 실제 구현/둥지 생성 페이지.png">
 
    9.  UpdateGroupView
    : 둥지 수정 페이지임.
    : 형성되었던 둥지를 둥지 관리자만 수정할 수 있도록 구성
      <img src="App structures(ERD, component, UI)/UI 실제 구현/둥지 수정 페이지.png">

    10. UserProfile
    : 구현하려 했으나 시간 부족으로 앱에 연결하지 못함.

  - 전체 테마
    : '덕질친구'라는 말에서 따온 DUCK9가 오리를 뜻하기 때문에, 오리로 UI의 테마 결정
    : 흰색, 노란색, 흰색을 이용해 전체 화면 구성을 조화롭게 함

<br/>

# 4. 진행 과정                                             
| 날짜       | 공통                                                                                                                                                                       | front                                                                                                                                                                                         | back                                            | 수정사항                                                 |
|:-----------|:---------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:------------------------------------------------|:---------------------------------------------------------|
| 2024-05-16 | 컨셉회의 <br> ERD 작성 <br> 컴포넌트 구조 작성  <br> 모델 생성  <br> fixtures 생성                                                                                         |                                                                                                                                                                                               |                                                 |                                                          |
| 2024-05-17 | (강사님)프로젝트 컨셉 발표  <br>  영화 fixtures 생성 <br> user fixtures 생성 <br>keyword fixtures 생성 <br>meets fixtures 생성 <br>review fixtues 생성 <br>앱/ 팀로고 생성 | 로그인 페이지 생성  <br>  회원가입 페이지 생성  <br>  fixtures loaddata 확인                                                                                                                  | 로그인/로그아웃 구현  <br>  회원가입 구현       |                                                          |
| 2024-05-18 | keyword-user 관계 모델 fixtures 생성<br> UI 수정                                                                                                                            | HomeView 생성                                                                                                                                                                                 | 모임 생성/수정/삭제 view 함수 및 serializer 작성 |                                                          |
| 2024-05-19 | meet모델 수정  <br> user following 필드 생성                                                                                                                                | Meet(모임) 전체 목록 확인 페이지 생성 <br> 가입 모임 확인 페이지 생성                                                                                                                          | movie list serializer 수정                    | 1. meet - movie필드 삭제 <br> 2. user follow 테이블 변경 |
| 2024-05-20 | fixtures 재생성                                                                                                                                                             | Navbar, footer 스타일 수정 <br>모임 조회 시 로그인 유무에 따라 페이지 분기                                                                                                                     | User 모델에 admin 필드 추가                    |                                                          |
| 2024-05-21 | (강사님)중간 보고                                                                                                                                                          | 리뷰 평가 시 별점 평가 기능 수정(0.5점 도입)<br> Meet(모임) 조회 페이지 admin 유저에게만 수정, 삭제 버튼 보이도록 수정                                                                         |                                                 |                                                          |
| 2024-05-22 |                                                                                                                                                                            | 모임 수정 버튼 추가 <br> 리뷰 조회 페이지 비동기 업데이트 구현 <br> 리뷰 생성 페이지 생성 <br>리뷰 삭제 버튼 생성 <br> 영화 상세 페이지 로그인 및 회원 가입 여부에 따라 접근 정도 수정 <br>Meet(모임) 목록 조회 페이지, 세부 페이지 스타일링 <br>Home View 모션 효과 추가 |                                                 | 로그인 시 토큰 갱신 안 되는 에러 해결                     |
| 2024-05-23 | 발표 자료 제작                                                                                                                                                             | 영화 상세 페이지 목록으로 가기 버튼 추가 <br> 로그인, 회원 가입 화면 스타일링 <br>영화 세부 페이지 스타일링 <br>모임 생성 페이지 스타일링                                                     | 영화 추천 알고리즘 수정                       | 로그인 시 유저 정보 안 받아지는 에러 해결                |
| 2024-05-24 | PJT 경진 대회                                                                                                                                                              |                                                                                                                                                                                               |                                                 |                                                          |



<br/>

# 5. 보완점
  - 초기 계획에는 선호 키워드 선택 뿐만 아니라 비선호 키워드 필터링 기능도 계획했으나 구현하지 못함
  - 유저 모델 및 프로필 컴포넌트 작성하지만 완성도 문제로 홈 화면에 연결하지 않음
    - 추천 알고리즘이 유저 키워드에 기반을 둔 만큼 유저 프로필 구현했다면 좋았을 듯.
  

<br/>

# 6. 소감
`임예원` 
: 항상 마음에 새기고 있는 말이 있다. 성공은 노력의 또다른 이름이다. 조금 오글거리는 말이기는 하지만 이번 프로젝트를 하면서 이 문장의 의미를 마음 깊이 새기게 되었다. SSAFY에 들어와 처음으로 소프트웨어 지식, 컴퓨터 언어 등을 힘겹게 배우고 Django를 시작하자 솔직히 좌절이 되었다. 과연 내가 해낼 수 있을까?라는 의문이 들었다. 그래도 한 주 한 주, 따라가기 위해 했던 복습과 노력들이 쌓여 지금 이 프로젝트까지 마무리할 수 있게 되었다. 
프로젝트를 시작할 때는 지금껏 배웠던 것을 어떻게 조합해서 결과물을 얻을 수 있을지 의문이 들었다. 그래도 하나하나 해나가기 시작했다. 우선, 브레인 스토밍으로 프로젝트의 방향을 잡고 ERD와 컴포넌트 구조를 짜니 얼른 결과물을 보고싶었다. 그러나, 하나의 화면을 구성하는 데에도 정말 많은 노력이 필요했다. 그렇게 얻은 결과물은 나의 자식과도 같이 소중했다. 그렇게 하나하나 구성하다보니, 한주가 지나 프로젝트를 제출할 수 있을 정도의 결과물이 나오게 되었다. 
2학기에 가서도 많은 프로젝트를 진행하겠지만, 이번 프로젝트만큼 기억에 남을 프로젝트는 없을 것 같다. 정말 땅을 파는 작업부터 건물을 세우는 작업까지 한 주 안에 완성해야 했기에 쉽지 않았지만, 그만큼 값어치가 있었다.

`김하연` 
: 프로젝트를 진행하며 초기 계획을 상당히 세밀하게 짜야한다는 것을 깨달았다. 컴포넌트 구조나 ERD를 충분히 세세하게 구현했다고 생각했는데도 프로젝트를 진행하다보니, 기능 구현에 부족한 부분이 있었다. 때문에 2-3일차까지도 계속해서 모델을 수정했고, API 사이트로 요청을 보내는 것이 아니라 django db에 데이터를 저장해놓고 불러오는 프로젝트이기 때문에 그 때마다 DB를 날리고 fixtures를 재생성하느라 시간이 많이 소요되어 아쉬움이 남는다. 첫 프로젝트다 보니 초기 계획과 달리 Back과 Front가 명확히 구분되지 않고 그때 그때 필요한 기능과 페이지를 구현하는 식으로 했는데, 계획과는 다르지만 django와 vue를 모두 사용해볼 수 있다는 점이 좋았다. 앱을 만들다보니 한 학기 동안 배운 모든 것을 집약적으로 사용하며 복습할 수 있던 점 또한 재밌었다. 완벽하진 않지만 생각한 기능을 배운 것을 바탕으로 구현하는 점이 특히 재미있었다. 
 또한 프로젝트를 통틀어 가장 재밌고 인상 깊었던 점은 review 페이지의 rate(평점) 항목을 입력할 때 별 모양으로 입력하도록 구현하는 것이었다. 배운 것을 바탕으로 구현해보기 위해 인덱스가 있는 태그를 다섯 개 만든 뒤 드래그 이벤트를 걸어 해당 태그 내 이미지 태그가 빈 별 이미지 파일과 반만 찬 별 이미지, 꽉 찬 별 이미지 파일을 왔다 갔다 하도록 만들고, 각 이미지 태그별로 0, 0.5, 1 값을 부여한 뒤 이를 다시 계산해 rate로 보내게 만들었다. 실제 웹 사이트들 사용 경험을 바탕으로 인덱스가 높은 태그에 이벤트가 발생할 경우 그것보다 인덱스가 작은 별도 전부 꽉 찬 별로 바꾸게 만들었다. 그러나 반만 찬 별을 구현하는 것이 너무 어려웠는데 결국 이벤트 발생 시에는 반만 찬 별로 바꾸고, 이벤트 발생 시점으로부터 1초가 지날 경우 꼬가 찬 별로 바꾸는 방식으로 rating을 구현하였다. 언젠가 꼭 더 매끄러운 로직을 만들어 보고 싶다. 그러나 배운 것을 쥐어짜내서 어찌저찌 비슷하게 구현했다는 점에 뿌듯하다.
